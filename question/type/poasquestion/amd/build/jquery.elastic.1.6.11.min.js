define(["jquery"],function(a){a.fn.extend({elastic:function(){var b=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight","border-top-width","border-right-width","border-bottom-width","border-left-width","borderTopStyle","borderTopColor","borderRightStyle","borderRightColor","borderBottomStyle","borderBottomColor","borderLeftStyle","borderLeftColor"];return this.each(function(){function c(){var a=Math.floor(parseInt(f.width(),10));g.width()!==a&&(g.css({width:a+"px"}),e(!0))}function d(a,b){var c=Math.floor(parseInt(a,10));f.height()!==c&&f.css({height:c+"px",overflow:b})}function e(a){var b=f.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),c=g.html().replace(/<br>/gi,"<br />");if((a||b+"&nbsp;"!==c)&&(g.html(b+"&nbsp;"),Math.abs(g.height()+h-f.height())>3)){var e=g.height()+h;e>=j?d(j,"auto"):e<=i?d(i,"hidden"):d(e,"hidden")}}if("textarea"!==this.type)return!1;var f=a(this),g=a("<div />").css({position:"absolute",display:"none","word-wrap":"break-word","white-space":"pre-wrap"}),h=parseInt(f.css("line-height"),10)||parseInt(f.css("font-size"),"10"),i=parseInt(f.css("height"),10)||3*h,j=parseInt(f.css("max-height"),10)||Number.MAX_VALUE;j<0&&(j=Number.MAX_VALUE),g.appendTo(f.parent());for(var k=b.length;k--;)g.css(b[k].toString(),f.css(b[k].toString()));f.css({overflow:"hidden"}),f.bind("keyup change cut paste",function(){e()}),a(window).bind("resize",c),f.bind("resize",c),f.bind("update",e),f.bind("blur",function(){g.height()<j&&(g.height()>i?f.height(g.height()):f.height(i))}),f.bind("input paste",function(a){setTimeout(e,250)}),e()})}})});