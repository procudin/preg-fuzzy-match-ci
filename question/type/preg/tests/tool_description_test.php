<?php

/**
 * Tests for /question/type/preg/authoring_tools/preg_description_tool.php.
 *
 * @package    qtype_preg
 * @copyright  2012 Oleg Sychev, Volgograd State Technical University
 * @author     Pahomov Dmitry
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */

defined('MOODLE_INTERNAL') || die();

global $CFG;
require_once($CFG->dirroot . '/question/type/preg/authoring_tools/preg_description_tool.php');

class qtype_preg_tool_description_test extends PHPUnit_Framework_TestCase {

    /**
     * @dataProvider charset_provider
     */
    public function test_charset($regex,$expected_en,$expected_ru)
    {
        $handler = new qtype_preg_description_tool($regex);
        $result = $handler->description('%content','%content');
        $this->assertEquals($expected_en, $result);
    }
    public function charset_provider()
    {
        return array(
          array('[^[:^word:]abc\pL]','any character except the following: not a word character, letter, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>;','рус - TODO'),
          array('a','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>','рус - TODO'),
          array('[^a]','not <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>','рус - TODO'),
          array('\w','a word character','рус - TODO'),
          array('\W','not a word character','рус - TODO'),
          //array('[\x00-\xff]','one of the following characters: null character(NUL), start of header character (SOH), start of text character(STX), end of text character(ETX), end of transmission character(EOT), enquiry character(ENQ), acknowledgment character(ACK), bell character(BEL), backspace character(BS), tabulation(HT), line feed(LF), vertical tabulation(VT), form feed(FF), carriage return character(CR), shift out character (SO), shift in character (SI), data link escape character (DLE), device control 1 (oft. XON) character (DC1), device control 2 character (DC2), device control 3 (oft. XOFF) character (DC3), device control 4 character (DC4), negative acknowledgement character (NAK), synchronous idle character (SYN), end of transmission block character (ETB), cancel character (CAN), end of medium character (EM), substitute character (SUB), escape(ESC), file separator character (FS), group separator character (GS), record separator character (RS), unit separator character (US), space, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>!</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>"</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>#</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>$</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>%</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>&</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>\'</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>(</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>)</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>*</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>+</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>,</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>-</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>.</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>/</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>0</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>1</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>2</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>3</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>4</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>5</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>6</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>7</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>8</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>9</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>:</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>;</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'><</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>=</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>></span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>?</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>@</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>A</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>B</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>C</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>D</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>E</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>F</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>G</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>H</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>I</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>J</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>K</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>L</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>M</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>N</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>O</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>P</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Q</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>R</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>S</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>T</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>U</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>V</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>W</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>X</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Y</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Z</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>[</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>\</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>]</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>^</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>_</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>`</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>d</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>f</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>h</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>j</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>k</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>l</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>m</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>n</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>o</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>p</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>q</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>r</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>s</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>t</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>u</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>v</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>w</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>x</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>y</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>z</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>{</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>|</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>}</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>~</span>, delete character (DEL), character with code 0x80, character with code 0x81, character with code 0x82, character with code 0x83, character with code 0x84, character with code 0x85, character with code 0x86, character with code 0x87, character with code 0x88, character with code 0x89, character with code 0x8A, character with code 0x8B, character with code 0x8C, character with code 0x8D, character with code 0x8E, character with code 0x8F, character with code 0x90, character with code 0x91, character with code 0x92, character with code 0x93, character with code 0x94, character with code 0x95, character with code 0x96, character with code 0x97, character with code 0x98, character with code 0x99, character with code 0x9A, character with code 0x9B, character with code 0x9C, character with code 0x9D, character with code 0x9E, character with code 0x9F, non-breaking space, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¡</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¢</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>£</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¤</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¥</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¦</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>§</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¨</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>©</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ª</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>«</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¬</span>, soft hyphen character, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>®</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¯</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>°</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>±</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>²</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>³</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>´</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>µ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¶</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>·</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¸</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¹</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>º</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>»</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¼</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>½</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¾</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>¿</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>À</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Á</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Â</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ã</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ä</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Å</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Æ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ç</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>È</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>É</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ê</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ë</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ì</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Í</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Î</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ï</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ð</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ñ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ò</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ó</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ô</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Õ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ö</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>×</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ø</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ù</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ú</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Û</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ü</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ý</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Þ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ß</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>à</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>á</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>â</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ã</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ä</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>å</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>æ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ç</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>è</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>é</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ê</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ë</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ì</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>í</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>î</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ï</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ð</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ñ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ò</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ó</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ô</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>õ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ö</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>÷</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ø</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ù</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ú</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>û</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ü</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ý</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>þ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ÿ</span>;','рус - TODO'),
          array('[\x00-\xFF]','one of the following characters: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>-</span>, any character from null character(NUL) to <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>&#44;</span>, any character from <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>.</span> to <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ÿ</span>;','рус - TODO'),
          //array('[\x{ff}-\x{1ff}]','one of the following characters: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ÿ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ā</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ā</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ă</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ă</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ą</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ą</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ć</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ć</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ĉ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ĉ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ċ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ċ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Č</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>č</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ď</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ď</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Đ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>đ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ē</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ē</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ĕ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ĕ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ė</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ė</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ę</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ę</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ě</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ě</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ĝ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ĝ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ğ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ğ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ġ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ġ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ģ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ģ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ĥ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ĥ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ħ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ħ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ĩ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ĩ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ī</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ī</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ĭ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ĭ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Į</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>į</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>İ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ı</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ĳ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ĳ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ĵ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ĵ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ķ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ķ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ĸ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ĺ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ĺ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ļ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ļ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ľ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ľ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ŀ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ŀ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ł</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ł</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ń</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ń</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ņ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ņ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ň</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ň</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ŉ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ŋ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ŋ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ō</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ō</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ŏ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ŏ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ő</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ő</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Œ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>œ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ŕ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ŕ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ŗ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ŗ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ř</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ř</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ś</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ś</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ŝ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ŝ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ş</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ş</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Š</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>š</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ţ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ţ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ť</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ť</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ŧ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ŧ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ũ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ũ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ū</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ū</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ŭ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ŭ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ů</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ů</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ű</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ű</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ų</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ų</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ŵ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ŵ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ŷ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ŷ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ÿ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ź</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ź</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ż</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ż</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ž</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ž</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ſ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƀ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ɓ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƃ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƃ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƅ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƅ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ɔ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƈ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƈ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ɖ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ɗ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƌ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƌ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƍ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǝ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ə</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ɛ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƒ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƒ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ɠ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ɣ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƕ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ɩ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ɨ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƙ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƙ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƚ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƛ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ɯ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ɲ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƞ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ɵ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ơ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ơ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƣ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƣ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƥ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƥ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ʀ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƨ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƨ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ʃ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƪ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƫ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƭ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƭ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ʈ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ư</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ư</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ʊ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ʋ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƴ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƴ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƶ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƶ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ʒ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƹ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƹ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƺ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƻ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƽ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƽ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƾ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ƿ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǀ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǁ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǂ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǃ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǆ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǅ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǆ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǉ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǈ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǉ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǌ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǋ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǌ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǎ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǎ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǐ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǐ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǒ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǒ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǔ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǔ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǖ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǖ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǘ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǘ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǚ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǚ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǜ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǜ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǝ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǟ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǟ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǡ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǡ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǣ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǣ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǥ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǥ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǧ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǧ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǩ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǩ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǫ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǫ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǭ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǭ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǯ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǯ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǰ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǳ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǲ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǳ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǵ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǵ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƕ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ƿ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǹ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǹ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǻ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǻ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǽ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǽ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>Ǿ</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǿ</span>;','рус - TODO'),
          array('[\x{FF}-\x{1FF}]','any character from <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ÿ</span> to <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǿ</span>','рус - TODO'),
          array('[a-z]','any character from <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> to <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>z</span>','рус - TODO'),
          array('[a-c]','one of the following characters: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>;','рус - TODO'),
          array('[\x00\r\x22-\x3C\t]','one of the following characters: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>-</span>, null character(NUL), carriage return character(CR), any character from <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>&#34;</span> to <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>&#44;</span>, any character from <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>.</span> to <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>&#60;</span>, tabulation(HT);','рус - TODO'),
          array('[ÿ-ƎƏ-ǿ]','any character from <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ÿ</span> to <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ǿ</span>','рус - TODO'),
          array('[dcab]','one of the following characters: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>d</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>;','рус - TODO'),
        );
    }

    //------------------------------------------------------------------
    public function test_meta()
    {
        $handler = new qtype_preg_description_tool('a|b|');
        $result = $handler->description('%content','%content');
        $expected = '<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> or <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span> or nothing';
        $this->assertEquals($expected, $result);
    }

    //------------------------------------------------------------------

    /**
     * @dataProvider assert_provider
     */
    public function test_assert($regex,$expected_en,$expected_ru)
    {
        $handler = new qtype_preg_description_tool($regex);
        //var_dump($handler);
        $result = $handler->description('%content','%content');
        $this->assertEquals($expected_en, $result);
    }
    public function assert_provider()
    {
        return array(
          array('^','start of the string','рус - TODO'),
          array('$','end of the string','рус - TODO'),
          array('\b','a word boundary','рус - TODO'),
          array('\B','not a word boundary','рус - TODO'),
          array('\A','start of the string','рус - TODO'),
          array('\Z','end of the string','рус - TODO'),
          //array('\G','at the first matching position in the subject','рус - TODO')
        );
    }

    //------------------------------------------------------------------

    public function test_backref()
    {
        $handler = new qtype_preg_description_tool('(a)\1');
        //var_dump($handler);
        $result = $handler->description('%content','%content');
        $expected = 'subpattern #1: [ <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> ] then text matched by subpattern #1';
        $this->assertEquals($expected, $result);
    }

    //------------------------------------------------------------------

    public function test_recursion()
    {
        $handler = new qtype_preg_description_tool('(?(R)a|b)');
        //var_dump($handler);
        $result = $handler->description('%content','%content');
        $expected = 'if the whole pattern is in recursive matching then check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>] else check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>]';
        $this->assertEquals($expected, $result);
    }

    //------------------------------------------------------------------

    /**
     * @dataProvider concat_provider
     */
    public function test_concat($regex,$expected_en,$expected_ru)
    {
        $handler = new qtype_preg_description_tool($regex);
        //var_dump($handler);
        $result = $handler->description('%content','%content');
        $this->assertEquals($expected_en, $result);
    }

    public function concat_provider()
    {
        return array(
          array('ab','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>','рус - TODO'),
          array('[a|b]c','one of the following characters: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>&#124;</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>; then <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>','рус - TODO'),
          array('abc','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>','рус - TODO'),
          array(' \t\n\r','space then tabulation(HT) then line feed(LF) then carriage return character(CR)','рус - TODO'),
          array('\0113','tabulation(HT) then <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>3</span>','рус - TODO'),
          array('bcab','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>','рус - TODO'),
          array('\x{2002}\x{2003}\x{2009}\x{200C}\x{200D}','en space then em space then thin space then zero width non-joiner then zero width joiner','рус - TODO'),
        );
    }

    //------------------------------------------------------------------

    /**
     * @dataProvider alt_provider
     */
    public function test_alt($regex,$expected_en,$expected_ru)
    {
        $handler = new qtype_preg_description_tool($regex);
        //var_dump($handler);
        $result = $handler->description('%content','%content');
        $this->assertEquals($expected_en, $result);
    }

    public function alt_provider()
    {
        return array(
          array('a|b','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> or <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>','рус - TODO'),
          array('a|b|','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> or <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span> or nothing','рус - TODO'),
          array('a|b|c','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> or <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span> or <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>','рус - TODO'),
        );
    }

    //------------------------------------------------------------------

    /**
     * @dataProvider nassert_provider
     */
    public function test_nassert($regex,$expected_en,$expected_ru)
    {
        $handler = new qtype_preg_description_tool($regex);
        //var_dump($handler);
        $result = $handler->description('%content','%content');
        $this->assertEquals($expected_en, $result);
    }

    public function nassert_provider()
    {
        return array(
          array('(?=abc)g','further text should match: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>] and <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span>','рус - TODO'),
          array('(?!abc)g','further text should not match: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>] and <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span>','рус - TODO'),
          array('(?<=abc)g','preceding text should match: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>] then <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span>','рус - TODO'),
          array('(?<!abc)g','preceding text should not match: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>] then <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span>','рус - TODO'),
          array('a(?=abc)g','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> then further text should match: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>] and <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span>','рус - TODO'),
          array('a(?!abc)g','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> then further text should not match: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>] and <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span>','рус - TODO'),
          array('a(?<=abc)g','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> and preceding text should match: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>] then <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span>','рус - TODO'),
          array('a(?<!abc)g','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> and preceding text should not match: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>] then <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span>','рус - TODO'),
        );
    }

    //------------------------------------------------------------------

    /**
     * @dataProvider quant_provider
     */
    public function test_quant($regex,$expected_en,$expected_ru)
    {
        $handler = new qtype_preg_description_tool($regex);
        //var_dump($handler);
        $result = $handler->description('%content','%content');
        $this->assertEquals($expected_en, $result);
    }

    public function quant_provider()
    {
        return array(
          array('g{0,1}','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span> may be missing','рус - TODO'),
          array('g+','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span> repeated any number of times','рус - TODO'),
          array('g*','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span> repeated any number of times or missing','рус - TODO'),
          array('g?','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span> may be missing','рус - TODO'),
          array('g{0,1}','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span> may be missing','рус - TODO'),
          array('g{0,}','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span> repeated any number of times or missing','рус - TODO'),
          array('g{1,}','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span> repeated any number of times','рус - TODO'),
          array('g{3}','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span> repeated 3 times','рус - TODO'),
          array('g{2,5}','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span> repeated from 2 to 5 times','рус - TODO'),
        );
    }

    //------------------------------------------------------------------

    /**
     * @dataProvider option_provider
     */
    public function test_option($regex,$expected_en,$expected_ru)
    {
        $handler = new qtype_preg_description_tool($regex);
        //var_dump($handler);
        $result = $handler->description('%content','%content');
        $this->assertEquals($expected_en, $result);
    }

    public function option_provider()
    {
        return array(
          array('(?i)b','caseless: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>','рус - TODO'),
          array('(?i:b)','grouping: [ caseless: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span> ]','рус - TODO'),
          array('(a(?i)b)c','case sensitive: subpattern #1: [ <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> then caseless: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span> ] then <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>','рус - TODO'),
          //array('(?i)a(?u)b(?-i)c(?-u)d','subexpression #1: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>caseless: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>] then case sensitive: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>','рус - TODO'),
        );
    }

    //------------------------------------------------------------------
	/**
	 * @dataProvider numbering_provider
	 */
    public function test_numbering($regex,$expected_en,$expected_ru)
    {
    	$handler=new qtype_preg_description_tool($regex);
        //var_dump($handler);
        $result = $handler->default_description();
        $this->assertEquals($expected_en, $result);
    }

    public function numbering_provider()
    {
    	//Add by Nguyen Dinh Dung for diplom of devide regular expression by part of description text
    	return array(
		    array('([a|b]|)\W+','<span style="background: white"><span id="description_node_1_0_10" class="description" style="background: white" ><span id="description_node_2_0_7" class="description" style="background: white" >subpattern #1: [ <span id="description_node_3_1_6" class="description" style="background: white" ><span id="description_node_4_1_5" class="description" style="background: white" >one of the following characters: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>&#124;</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>;</span> or <span id="description_node_5_7_6" class="description" style="background: white" >nothing</span></span> ]</span> then <span id="description_node_6_8_10" class="description" style="background: white" ><span id="description_node_7_8_9" class="description" style="background: white" >not a word character</span> repeated any number of times</span></span></span>','рус - TODO'),
		    //BACKSLASH
		    array('\Qabc$xyz\E','<span style="background: white"><span id="description_node_1_2_8" class="description" style="background: white" ><span id="description_node_2_2_2" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_3_3_3" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span></span><span id="description_node_4_4_4" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span></span><span id="description_node_5_5_5" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>$</span></span><span id="description_node_6_6_6" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>x</span></span><span id="description_node_7_7_7" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>y</span></span><span id="description_node_8_8_8" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>z</span></span></span></span>','рус - TODO'),
		    //CIRCUMFLEX AND DOLLAR
		    array('/^abc$/','<span style="background: white"><span id="description_node_1_0_6" class="description" style="background: white" ><span id="description_node_2_0_0" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>/</span></span> then <span id="description_node_3_1_1" class="description" style="background: white" >start of the string</span> then <span id="description_node_4_2_2" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_5_3_3" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span></span><span id="description_node_6_4_4" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span></span> then <span id="description_node_7_5_5" class="description" style="background: white" >end of the string</span> then <span id="description_node_8_6_6" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>/</span></span></span></span>','рус - TODO'),
		    //FULL STOP (PERIOD, DOT) AND \N
		    array('\N','<span style="background: white"><span id="description_node_1_0_1" class="description" style="background: white" >line feed(LF)</span></span>','рус - TODO'),
		    //MATCHING A SINGLE DATA UNIT
		    array('(?|(?=[\x00-\x7f])(\C)|(?=[\x80-\x{7ff}])(\C)(\C)|(?=[\x{800}-\x{ffff}])(\C)(\C)(\C)|(?=[\x{10000}-\x{1fffff}])(\C)(\C)(\C)(\C))','<span style="background: white"><span id="description_node_1_0_127" class="description" style="background: white" >grouping: [ <span id="description_node_2_3_126" class="description" style="background: white" ><span id="description_node_3_3_21" class="description" style="background: white" ><span id="description_node_4_3_17" class="description" style="background: white" >further text should match: [<span id="description_node_5_6_16" class="description" style="background: white" >one of the following characters: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>-</span>, any character from null character(NUL) to <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>&#44;</span>, any character from <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>.</span> to delete character (DEL)</span>]</span> and <span id="description_node_6_18_21" class="description" style="background: white" >subpattern #1: [ <span id="description_node_7_19_20" class="description" style="background: white" >any character</span> ]</span></span> or <span id="description_node_8_23_48" class="description" style="background: white" ><span id="description_node_9_23_40" class="description" style="background: white" >further text should match: [<span id="description_node_10_26_39" class="description" style="background: white" >any character from character with code 0x80 to character with code 0x7FF</span>]</span> and <span id="description_node_11_41_44" class="description" style="background: white" >subpattern #1: [ <span id="description_node_12_42_43" class="description" style="background: white" >any character</span> ]</span> then <span id="description_node_13_45_48" class="description" style="background: white" >subpattern #2: [ <span id="description_node_14_46_47" class="description" style="background: white" >any character</span> ]</span></span> or <span id="description_node_15_50_83" class="description" style="background: white" ><span id="description_node_16_50_71" class="description" style="background: white" >further text should match: [<span id="description_node_17_53_70" class="description" style="background: white" >any character from <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>ࠀ</span> to character with code 0xFFFF</span>]</span> and <span id="description_node_18_72_75" class="description" style="background: white" >subpattern #1: [ <span id="description_node_19_73_74" class="description" style="background: white" >any character</span> ]</span> then <span id="description_node_20_76_79" class="description" style="background: white" >subpattern #2: [ <span id="description_node_21_77_78" class="description" style="background: white" >any character</span> ]</span> then <span id="description_node_22_80_83" class="description" style="background: white" >subpattern #3: [ <span id="description_node_23_81_82" class="description" style="background: white" >any character</span> ]</span></span> or <span id="description_node_24_85_126" class="description" style="background: white" ><span id="description_node_25_85_110" class="description" style="background: white" >further text should match: [<span id="description_node_26_88_109" class="description" style="background: white" >The character code 0x1fffff is too big</span>]</span> and <span id="description_node_27_111_114" class="description" style="background: white" >subpattern #1: [ <span id="description_node_28_112_113" class="description" style="background: white" >any character</span> ]</span> then <span id="description_node_29_115_118" class="description" style="background: white" >subpattern #2: [ <span id="description_node_30_116_117" class="description" style="background: white" >any character</span> ]</span> then <span id="description_node_31_119_122" class="description" style="background: white" >subpattern #3: [ <span id="description_node_32_120_121" class="description" style="background: white" >any character</span> ]</span> then <span id="description_node_33_123_126" class="description" style="background: white" >subpattern #4: [ <span id="description_node_34_124_125" class="description" style="background: white" >any character</span> ]</span></span></span> ]</span></span>','рус - TODO'),
		    //SQUARE BRACKETS AND CHARACTER CLASSES
		    array('[A-\d]','<span style="background: white"><span id="description_node_1_0_5" class="description" style="background: white" >one of the following characters: a decimal digit, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>A</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>-</span>;</span></span>','рус - TODO'),
		    //POSIX CHARACTER CLASSES
		    array('[01[:alpha:]%]','<span style="background: white"><span id="description_node_1_0_13" class="description" style="background: white" >one of the following characters: a letter, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>0</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>1</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>%</span>;</span></span>','рус - TODO'),
		    //VERTICAL BAR
		    array('gilbert|sullivan','<span style="background: white"><span id="description_node_1_0_15" class="description" style="background: white" ><span id="description_node_2_0_6" class="description" style="background: white" ><span id="description_node_3_0_0" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span></span><span id="description_node_4_1_1" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span></span><span id="description_node_5_2_2" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>l</span></span><span id="description_node_6_3_3" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span></span><span id="description_node_7_4_4" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span><span id="description_node_8_5_5" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>r</span></span><span id="description_node_9_6_6" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>t</span></span></span> or <span id="description_node_10_8_15" class="description" style="background: white" ><span id="description_node_11_8_8" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>s</span></span><span id="description_node_12_9_9" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>u</span></span><span id="description_node_13_10_10" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>l</span></span><span id="description_node_14_11_11" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>l</span></span><span id="description_node_15_12_12" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span></span><span id="description_node_16_13_13" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>v</span></span><span id="description_node_17_14_14" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_18_15_15" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>n</span></span></span></span></span>','рус - TODO'),
		    //INTERNAL OPTION SETTING
		    array('(a(?i)b)c','<span style="background: white">case sensitive: <span id="description_node_1_0_8" class="description" style="background: white" ><span id="description_node_2_0_7" class="description" style="background: white" >subpattern #1: [ <span id="description_node_3_1_6" class="description" style="background: white" ><span id="description_node_4_1_1" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span> then <span id="description_node_5_2_5" class="description" style="background: white" >caseless:</span> <span id="description_node_6_6_6" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span></span></span> ]</span> then <span id="description_node_7_8_8" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span></span></span></span>','рус - TODO'),
		    //SUBPATTERNS
		    array('cat(aract|erpillar|), the ((red|white) (king|queen))','<span style="background: white"><span id="description_node_1_0_51" class="description" style="background: white" ><span id="description_node_2_0_0" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span></span><span id="description_node_3_1_1" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_4_2_2" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>t</span></span> then <span id="description_node_5_3_19" class="description" style="background: white" >subpattern #1: [ <span id="description_node_6_4_18" class="description" style="background: white" ><span id="description_node_7_4_8" class="description" style="background: white" ><span id="description_node_8_4_4" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_9_5_5" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>r</span></span><span id="description_node_10_6_6" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_11_7_7" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span></span><span id="description_node_12_8_8" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>t</span></span></span> or <span id="description_node_13_10_17" class="description" style="background: white" ><span id="description_node_14_10_10" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span><span id="description_node_15_11_11" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>r</span></span><span id="description_node_16_12_12" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>p</span></span><span id="description_node_17_13_13" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span></span><span id="description_node_18_14_14" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>l</span></span><span id="description_node_19_15_15" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>l</span></span><span id="description_node_20_16_16" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_21_17_17" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>r</span></span></span> or <span id="description_node_22_19_18" class="description" style="background: white" >nothing</span></span> ]</span> then <span id="description_node_23_20_20" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>&#44;</span></span> then <span id="description_node_24_21_21" class="description" style="background: white" >space</span> then <span id="description_node_25_22_22" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>t</span></span><span id="description_node_26_23_23" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>h</span></span><span id="description_node_27_24_24" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span> then <span id="description_node_28_25_25" class="description" style="background: white" >space</span> then <span id="description_node_29_26_51" class="description" style="background: white" >subpattern #2: [ <span id="description_node_30_27_50" class="description" style="background: white" ><span id="description_node_31_27_37" class="description" style="background: white" >subpattern #3: [ <span id="description_node_32_28_36" class="description" style="background: white" ><span id="description_node_33_28_30" class="description" style="background: white" ><span id="description_node_34_28_28" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>r</span></span><span id="description_node_35_29_29" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span><span id="description_node_36_30_30" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>d</span></span></span> or <span id="description_node_37_32_36" class="description" style="background: white" ><span id="description_node_38_32_32" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>w</span></span><span id="description_node_39_33_33" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>h</span></span><span id="description_node_40_34_34" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span></span><span id="description_node_41_35_35" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>t</span></span><span id="description_node_42_36_36" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span></span></span> ]</span> then <span id="description_node_43_38_38" class="description" style="background: white" >space</span> then <span id="description_node_44_39_50" class="description" style="background: white" >subpattern #4: [ <span id="description_node_45_40_49" class="description" style="background: white" ><span id="description_node_46_40_43" class="description" style="background: white" ><span id="description_node_47_40_40" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>k</span></span><span id="description_node_48_41_41" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span></span><span id="description_node_49_42_42" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>n</span></span><span id="description_node_50_43_43" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span></span></span> or <span id="description_node_51_45_49" class="description" style="background: white" ><span id="description_node_52_45_45" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>q</span></span><span id="description_node_53_46_46" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>u</span></span><span id="description_node_54_47_47" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span><span id="description_node_55_48_48" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span><span id="description_node_56_49_49" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>n</span></span></span></span> ]</span></span> ]</span></span></span>','рус - TODO'),
		    //NAMED SUBPATTERNS
		    array('(?:(?<n>foo)|(?<n>bar))\k<n>','<span style="background: white"><span id="description_node_1_0_27" class="description" style="background: white" ><span id="description_node_2_0_22" class="description" style="background: white" >grouping: [ <span id="description_node_3_3_21" class="description" style="background: white" ><span id="description_node_4_3_11" class="description" style="background: white" >subpattern "n" #1: [ <span id="description_node_5_8_10" class="description" style="background: white" ><span id="description_node_6_8_8" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>f</span></span><span id="description_node_7_9_9" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>o</span></span><span id="description_node_8_10_10" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>o</span></span></span> ]</span> or <span id="description_node_9_13_21" class="description" style="background: white" ><span style="color:red">Two named subpatterns have the same name</span> Operands: <span id="description_node_10_18_20" class="description" style="background: white" ><span id="description_node_11_18_18" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span></span><span id="description_node_12_19_19" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_13_20_20" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>r</span></span></span></span></span> ]</span> then <span id="description_node_14_23_27" class="description" style="background: white" >text matched by subpattern "1"</span></span></span>','рус - TODO'),
		    //REPETITION
		    array('[aeiou]{3,}','<span style="background: white"><span id="description_node_1_0_10" class="description" style="background: white" ><span id="description_node_2_0_6" class="description" style="background: white" >one of the following characters: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>o</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>u</span>;</span> repeated at least 3 times</span></span>','рус - TODO'),
		    //ATOMIC GROUPING AND POSSESSIVE QUANTIFIERS
		    array('(abc|xyz){2,3}+','<span style="background: white"><span id="description_node_1_0_14" class="description" style="background: white" ><span id="description_node_2_0_8" class="description" style="background: white" >subpattern #1: [ <span id="description_node_3_1_7" class="description" style="background: white" ><span id="description_node_4_1_3" class="description" style="background: white" ><span id="description_node_5_1_1" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_6_2_2" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span></span><span id="description_node_7_3_3" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span></span></span> or <span id="description_node_8_5_7" class="description" style="background: white" ><span id="description_node_9_5_5" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>x</span></span><span id="description_node_10_6_6" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>y</span></span><span id="description_node_11_7_7" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>z</span></span></span></span> ]</span> repeated from 2 to 3 times (possessive quantifier)</span></span>','рус - TODO'),
		    //BACK REFERENCES
		    array('(abc(def)ghi)\g{-1}','<span style="background: white"><span id="description_node_1_0_18" class="description" style="background: white" ><span id="description_node_2_0_12" class="description" style="background: white" >subpattern #1: [ <span id="description_node_3_1_11" class="description" style="background: white" ><span id="description_node_4_1_1" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_5_2_2" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span></span><span id="description_node_6_3_3" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span></span> then <span id="description_node_7_4_8" class="description" style="background: white" >subpattern #2: [ <span id="description_node_8_5_7" class="description" style="background: white" ><span id="description_node_9_5_5" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>d</span></span><span id="description_node_10_6_6" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span><span id="description_node_11_7_7" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>f</span></span></span> ]</span> then <span id="description_node_12_9_9" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>g</span></span><span id="description_node_13_10_10" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>h</span></span><span id="description_node_14_11_11" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span></span></span> ]</span> then <span id="description_node_15_13_18" class="description" style="background: white" >text matched by subpattern #2</span></span></span>','рус - TODO'),
		    //ASSERTIONS
		    array('(?<=(?<!foo)bar)baz','<span style="background: white"><span id="description_node_1_0_18" class="description" style="background: white" ><span id="description_node_2_0_15" class="description" style="background: white" >preceding text should match: [<span id="description_node_3_4_14" class="description" style="background: white" ><span id="description_node_4_4_11" class="description" style="background: white" >preceding text should not match: [<span id="description_node_5_8_10" class="description" style="background: white" ><span id="description_node_6_8_8" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>f</span></span><span id="description_node_7_9_9" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>o</span></span><span id="description_node_8_10_10" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>o</span></span></span>]</span> then <span id="description_node_9_12_12" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span></span><span id="description_node_10_13_13" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_11_14_14" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>r</span></span></span>]</span> then <span id="description_node_12_16_16" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span></span><span id="description_node_13_17_17" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_14_18_18" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>z</span></span></span></span>','рус - TODO'),
		    //CONDITIONAL SUBPATTERNS
		    array('(?(1)(A|B|C)|(D|(?(2)E|F)|E))','<span style="background: white"><span id="description_node_1_0_28" class="description" style="background: white" >if the subpattern #1 has been successfully matched then check: [<span id="description_node_2_5_11" class="description" style="background: white" >subpattern #1: [ <span id="description_node_3_6_10" class="description" style="background: white" ><span id="description_node_4_6_6" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>A</span></span> or <span id="description_node_5_8_8" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>B</span></span> or <span id="description_node_6_10_10" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>C</span></span></span> ]</span>] else check: [<span id="description_node_7_13_27" class="description" style="background: white" >subpattern #2: [ <span id="description_node_8_14_26" class="description" style="background: white" ><span id="description_node_9_14_14" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>D</span></span> or <span id="description_node_10_16_24" class="description" style="background: white" >if the subpattern #2 has been successfully matched then check: [<span id="description_node_11_21_21" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>E</span></span>] else check: [<span id="description_node_12_23_23" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>F</span></span>]</span> or <span id="description_node_13_26_26" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>E</span></span></span> ]</span>]</span></span>','рус - TODO'),
		    //COMMENTS
		    array('abc #comment \n','<span style="background: white"><span id="description_node_1_0_14" class="description" style="background: white" ><span id="description_node_2_0_0" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_3_1_1" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span></span><span id="description_node_4_2_2" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span></span> then <span id="description_node_5_3_3" class="description" style="background: white" >space</span> then <span id="description_node_6_4_4" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>#</span></span><span id="description_node_7_5_5" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span></span><span id="description_node_8_6_6" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>o</span></span><span id="description_node_9_7_7" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>m</span></span><span id="description_node_10_8_8" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>m</span></span><span id="description_node_11_9_9" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span><span id="description_node_12_10_10" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>n</span></span><span id="description_node_13_11_11" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>t</span></span> then <span id="description_node_14_12_12" class="description" style="background: white" >space</span> then <span id="description_node_15_13_14" class="description" style="background: white" >line feed(LF)</span></span></span>','рус - TODO'),
		    //RECURSIVE PATTERNS
		    array('(?<pn>\(([^()]++|(?&pn))*\))','<span style="background: white"><span id="description_node_1_0_27" class="description" style="background: white" >subpattern "pn" #1: [ <span id="description_node_2_6_26" class="description" style="background: white" ><span id="description_node_3_6_7" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>(</span></span> then <span id="description_node_4_8_24" class="description" style="background: white" ><span id="description_node_5_8_23" class="description" style="background: white" >subpattern #2: [ <span id="description_node_6_9_22" class="description" style="background: white" ><span id="description_node_7_9_15" class="description" style="background: white" ><span id="description_node_8_9_13" class="description" style="background: white" >any character except the following: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>(</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>)</span>;</span> repeated any number of times (possessive quantifier)</span> or <span id="description_node_9_17_22" class="description" style="background: white" >recursive call of the subpattern "1"</span></span> ]</span> repeated any number of times or missing</span> then <span id="description_node_10_25_26" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>)</span></span></span> ]</span></span>','рус - TODO'),
		    //SUBPATTERNS AS SUBROUTINES
		    array('(sens|respons)e and \1ibility, (sens|respons)e and (?1)ibility','<span style="background: white"><span id="description_node_1_0_61" class="description" style="background: white" ><span id="description_node_2_0_13" class="description" style="background: white" >subpattern #1: [ <span id="description_node_3_1_12" class="description" style="background: white" ><span id="description_node_4_1_4" class="description" style="background: white" ><span id="description_node_5_1_1" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>s</span></span><span id="description_node_6_2_2" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span><span id="description_node_7_3_3" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>n</span></span><span id="description_node_8_4_4" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>s</span></span></span> or <span id="description_node_9_6_12" class="description" style="background: white" ><span id="description_node_10_6_6" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>r</span></span><span id="description_node_11_7_7" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span><span id="description_node_12_8_8" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>s</span></span><span id="description_node_13_9_9" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>p</span></span><span id="description_node_14_10_10" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>o</span></span><span id="description_node_15_11_11" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>n</span></span><span id="description_node_16_12_12" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>s</span></span></span></span> ]</span> then <span id="description_node_17_14_14" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span> then <span id="description_node_18_15_15" class="description" style="background: white" >space</span> then <span id="description_node_19_16_16" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_20_17_17" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>n</span></span><span id="description_node_21_18_18" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>d</span></span> then <span id="description_node_22_19_19" class="description" style="background: white" >space</span> then <span id="description_node_23_20_21" class="description" style="background: white" >text matched by subpattern #1</span> then <span id="description_node_24_22_22" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span></span><span id="description_node_25_23_23" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span></span><span id="description_node_26_24_24" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span></span><span id="description_node_27_25_25" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>l</span></span><span id="description_node_28_26_26" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span></span><span id="description_node_29_27_27" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>t</span></span><span id="description_node_30_28_28" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>y</span></span><span id="description_node_31_29_29" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>&#44;</span></span> then <span id="description_node_32_30_30" class="description" style="background: white" >space</span> then <span id="description_node_33_31_44" class="description" style="background: white" >subpattern #2: [ <span id="description_node_34_32_43" class="description" style="background: white" ><span id="description_node_35_32_35" class="description" style="background: white" ><span id="description_node_36_32_32" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>s</span></span><span id="description_node_37_33_33" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span><span id="description_node_38_34_34" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>n</span></span><span id="description_node_39_35_35" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>s</span></span></span> or <span id="description_node_40_37_43" class="description" style="background: white" ><span id="description_node_41_37_37" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>r</span></span><span id="description_node_42_38_38" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span><span id="description_node_43_39_39" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>s</span></span><span id="description_node_44_40_40" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>p</span></span><span id="description_node_45_41_41" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>o</span></span><span id="description_node_46_42_42" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>n</span></span><span id="description_node_47_43_43" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>s</span></span></span></span> ]</span> then <span id="description_node_48_45_45" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>e</span></span> then <span id="description_node_49_46_46" class="description" style="background: white" >space</span> then <span id="description_node_50_47_47" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span></span><span id="description_node_51_48_48" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>n</span></span><span id="description_node_52_49_49" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>d</span></span> then <span id="description_node_53_50_50" class="description" style="background: white" >space</span> then <span id="description_node_54_51_54" class="description" style="background: white" >call of the subpattern #1</span> then <span id="description_node_55_55_55" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span></span><span id="description_node_56_56_56" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span></span><span id="description_node_57_57_57" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span></span><span id="description_node_58_58_58" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>l</span></span><span id="description_node_59_59_59" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>i</span></span><span id="description_node_60_60_60" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>t</span></span><span id="description_node_61_61_61" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>y</span></span></span></span>','рус - TODO'),
		    //ONIGURUMA SUBROUTINE SYNTAX
		    array('(?<pn>\(((?>[^()]+)|\g<pn>)*\))','<span style="background: white"><span id="description_node_1_0_30" class="description" style="background: white" >subpattern "pn" #1: [ <span id="description_node_2_6_29" class="description" style="background: white" ><span id="description_node_3_6_7" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>(</span></span> then <span id="description_node_4_8_27" class="description" style="background: white" ><span id="description_node_5_8_26" class="description" style="background: white" >subpattern #2: [ <span id="description_node_6_9_25" class="description" style="background: white" ><span id="description_node_7_9_18" class="description" style="background: white" >once checked subpattern #: [ <span id="description_node_8_12_17" class="description" style="background: white" ><span id="description_node_9_12_16" class="description" style="background: white" >any character except the following: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>(</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>)</span>;</span> repeated any number of times</span> ]</span> or <span id="description_node_10_20_25" class="description" style="background: white" >recursive call of the subpattern "1"</span></span> ]</span> repeated any number of times or missing</span> then <span id="description_node_11_28_29" class="description" style="background: white" ><span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>)</span></span></span> ]</span></span>','рус - TODO')
	    );
    }

    //------------------------------------------------------------------

    /**
     * @dataProvider condmask_provider
     */
    public function test_condmask($regex,$expected_en,$expected_ru)
    {
        $handler = new qtype_preg_description_tool($regex);
        //if($regex == '(?(?=a)b)' )var_dump($handler->dstroot);
        $result = $handler->description('%content','%content');
        $this->assertEquals($expected_en, $result);
    }

    public function condmask_provider()
    {
        return array(
          array('(?(?=a)b|c)','if further text matches: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>] then check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>] else check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>]','рус - TODO'),
          array('(?(?!a)b|c)','if further text does not match: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>] then check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>] else check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>]','рус - TODO'),
          array('(?(?<=a)b|c)','if preceding text matches: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>] then check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>] else check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>]','рус - TODO'),
          array('(?(?<!a)b|c)','if preceding text does not match: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>] then check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>] else check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>]','рус - TODO'),
          array('(?(?=a)b)','if further text matches: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>] then check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>] else check: [nothing]','рус - TODO'),
          array('(?(1)a)','if the subpattern #1 has been successfully matched then check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>] else check: [nothing]','рус - TODO'),
          array('(?(name)a)','if the subpattern "" has been successfully matched then check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>] else check: [nothing]','рус - TODO'),
          array('(?(<name>)a)','if the subpattern "" has been successfully matched then check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>] else check: [nothing]','рус - TODO'),
          array('(?(<name>)a|b)','if the subpattern "" has been successfully matched then check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>] else check: [<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>]','рус - TODO'),
          array('(?(DEFINE)(?<name>a))','definition of subpattern "name" #1: [ <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> ]','рус - TODO'),
        );
    }

    //------------------------------------------------------------------

    /**
     * @dataProvider postprocessing_provider
     */
    public function test_postprocessing($regex,$expected_en,$expected_ru)
    {
        $handler = new qtype_preg_description_tool($regex);
        //var_dump($handler);
        $result = $handler->description('%content','%content');
        $this->assertEquals($expected_en, $result);
    }

    public function postprocessing_provider()
    {
        return array(
          array('([abc])','subpattern #1: [ one of the following characters: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>; ]','рус - TODO'),
          array('[^\S]','a white space','рус - TODO'),
        );
    }

    //------------------------------------------------------------------

    /**
     * @dataProvider subexpression_provider
     */
    public function test_subexpression($regex,$expected_en,$expected_ru)
    {
        $handler = new qtype_preg_description_tool($regex);
        //var_dump($handler);
        $result = $handler->description('%content','%content');
        $this->assertEquals($expected_en, $result);
    }

    public function subexpression_provider()
    {
        return array(
          array('(?:[abc])','grouping: [ one of the following characters: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>, <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>; ]','рус - TODO'),
          //array('(?|(a)|(b))','1','рус - TODO'), doesnt work now
        );
    }

    /**
     * @dataProvider templates_provider
     */
    public function test_templates($regex,$expected_en,$expected_ru)
    {
        $handler = new qtype_preg_description_tool($regex);
        $root = $handler->get_ast_root();
        //var_dump($handler);
        $result = $handler->description('%content','%content');
        $this->assertEquals($expected_en, $result);
        //$this->assertTrue(false);
    }

    public function templates_provider()
    {
        return array(
            array('(?###word)', 'word', 'tbd'),
            array('(?###integer)', 'integer', 'tbd'),
            array('(?###parens_req<)a(?###>)', '<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> in parens', 'tbd'),
            array('(?###parens_opt<)a(?###>)','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span> in optional parens', 'tbd')
        );
    }

    public function test_template_errors() {
        $handler = new qtype_preg_description_tool('(?###wtf)');
        $root = $handler->get_ast_root();
        $whatever = $handler->description('%content','%content');
    }

    //------------------------------------------------------------------

    /**
     * @dataProvider err_provider
     */
    /*public function test_err($regex,$expected_en,$expected_ru)
    {
        $handler = new qtype_preg_description_tool($regex);
        //var_dump($handler);
        $result = $handler->description('%content','%content');
        $this->assertEquals($expected_en, $result);
    }

    public function err_provider()
    {
        return array(
          array('a{9,0}','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span><span style="color:red"> is repeated from 9 to 0 times (incorrect quantifier borders)</span>','рус - TODO'),
          array('(a','<span style="color:red">Syntax error: missing a closing parenthesis \')\' for the opening parenthesis in position 0.</span> Operands: <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>','рус - TODO'),
        );
    }*/

    /**
     * @dataProvider form_provider
     */
    /*public function test_form($regex,$expected_en,$expected_ru)
    {
        $handler = new qtype_preg_description_tool($regex);
        $result = $handler->form_description('g');
        $this->assertEquals($expected_en, $result);
    }

    public function form_provider()
    {
        return array(
          array('a','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>(form g)','рус - TODO'),
          array('\w','word character(form g)','рус - TODO'),
          array('$','end of the string(form g)','рус - TODO'),
          array('a|bc|','<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>a</span>(form g) or <span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>b</span>(form g)<span class="text-info" class=\'font-family:"Courier New", Courier, monospace;\'>c</span>(form g) or nothing(form g)','рус - TODO'),
        );
    }*/

    /*public function test_vardump()
    {
        $regex = '(?i)[\xff\x00-\x1fA-B\t\n]';
        $expected = '000';
        //var_dump($options);
        $handler = new qtype_preg_description_tool($regex);
        //var_dump($handler);
        $result = $handler->description('%content','%content');
        $this->assertEquals($expected_en, $result);
    }*/
}

/*
[\xff\x00-\x1fA-B\t\n]

  ["userinscription"]=>
  array(3) {
    [0]=>
    string(14) "\xff\x00-\\t\n"
    [1]=>
    string(3) "-"
    [2]=>
    string(3) "A-B"
  }
*/

